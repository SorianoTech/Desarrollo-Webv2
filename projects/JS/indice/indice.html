<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Indice con contenido</title>
        
        <script>
            window.onload = function () {
                generarToc();
            }
        </script>

        <script>
            function generarToc() {
                var elementos = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];
                i = 0;
                
                //var datos = document.getElementsByTagName('h1');
                //var num = datos.length;
                //alert("Hay " + num + " <p> elementos en este documento");
                /*
                 elementos.forEach(function (elemento, indice, array) {
                 datos = document.getElementsByTagName(elemento); //array con todos los elementos del DOM que coincidan con h
                 
                 
                 //datos.setAttribute("id", "titulo"+i++);
                 if (datos.innerHTML=! ""){
                 console.log(datos.innerHTML);
                 }
                 
                 });
                 */
                //Primero tengo que recorrer los elementos y luego los indices.
                for (var i = 0; i < elementos.length; i++) {
                    
                    datos = document.getElementsByTagName(elementos[i]); //array con todos los elementos del DOM que coincidan con h
                    console.log(datos); //para ver todas las propiedades
                    
                    //Recorro cada uno de los elementos que tiene cada una de las etiquetas h1, h2 ,h3
                    for (var d = 0; d < datos.length; d++) {
                            
                        console.log(datos[d]); //elemento completo <h4 id="Esto es un h4">Esto es un h4</h4>
                        console.log(datos[d].baseURI); //accediendo a un propiedad

                        // 1. Asigno a cada uno de las etiquetas h* que me encuentro un id para luego poder anclarlo.
                        if(!datos[d].id){ // ## Si la etiqueta no tiene ID se lo inserto
                            
                            datos[d].setAttribute("id", datos[d].innerHTML);
                            //Insertar elementos con el contenido.
                            // 2. Creo los tag que necesito y los meto en una variable
                            var lu = document.createElement("lu");
                            var li = document.createElement("li");
                            var a = document.createElement("a");
                            //Le asigno a los enlaces el atributo href con valor el id(que se lo he añadido antes)
                            //a.setAttribute("href","#"+datos[d].id);
                            a.href = "#" + datos[d].id;
                            var contenido = document.createTextNode(datos[d].innerHTML);   // texto plano para la lista    
                                  
                            a.appendChild(contenido); //inserto el texto sobre (a)
                            document.getElementById('lista').appendChild(li); //inserto un hijo sobre el div toc
                            li.appendChild(a); //inserto un hijo (a) sobre li
                        }else{ //Si tiene ID
                            //Capturar y realizar los pasos anteriores
                        }
                    }
                }
            }
        </script>

        <style type="text/css">
            
            #container{
                margin: auto;
                width: 90%;
            }
            
            div#toc {
                margin: auto;
                z-index: 1;
                /*position: absolute;*/
                border: rgb(80, 80, 80) solid 1px;
                padding: 0.4em;
                
                width: 90%;
                background-color: rgb(173, 171, 169);
                font-family: Arial;    
            }
            
            div#toc ul {
                height: 11em;
                overflow: auto;
                border: gray solid 1px;
                margin: 0.2em;
                font-size: 0.9em;    
            }

        </style>    
    </head>
    
    <body>
        <div id="toc">
            <b>TABLA DE CONTENIDOS</b>
            <ul id="lista">
            </ul>
        </div>
      
        <div id="container">

            <p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que también ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p><p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que también ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p><p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que también ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p>
            <p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que también ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p>
            <p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que también ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p>
            <h1>Encabezados</h1>
            <p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que también ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p>

            <h1>Encabezados 2</h1>
            <p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que tambien ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p>

            <h2>Esto es un H2</h2>
            <p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que tambien ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p>
            <h3>Esto es un h3</h3>
            <p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que tambien ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p>
                
            <h4>Esto es un h4</h4>
            <p>¿Qué es Lorem Ipsum?
                Lorem Ipsum es simplemente el texto de relleno de las imprentas y archivos de texto. Lorem Ipsum ha sido el texto de relleno estándar de las industrias desde el año 1500, cuando un impresor (N. del T. persona que se dedica a la imprenta) desconocido usó una galería de textos y los mezcló de tal manera que logró hacer un libro de textos especimen. No sólo sobrevivió 500 años, sino que tambien ingresó como texto de relleno en documentos electrónicos, quedando esencialmente igual al original. Fue popularizado en los 60s con la creación de las hojas "Letraset", las cuales contenian pasajes de Lorem Ipsum, y más recientemente con software de autoedición, como por ejemplo Aldus PageMaker, el cual incluye versiones de Lorem Ipsum.</p>  

            <p><a href="#toc">Volver al Menu</a></p>           
        
        </div>    
    </body>
</html>